import{Q as R,u as fe}from"./use-meta-DXtmNCeD.js";import{Q as N}from"./QChip-CooeTkw8.js";import{Q as he}from"./QBtnToggle-DByOP7dv.js";import{M as U,r as g,a as y,w as ve,v as _e,t as ge,N as j,O as w,P as u,a6 as o,R as s,T as O,U as i,Y as m,_ as P,X as L,a0 as ye,$ as xe,ad as V,a8 as Fe,a7 as E,S as b,ag as Ce,aB as be,ac as ke}from"./index-CdSTUFLs.js";import{u as we}from"./use-quasar-Di_hr8PK.js";import{u as A}from"./vue-i18n.runtime-CAvvqPWA.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Me={class:"row q-gutter-md q-mb-md"},Qe=["onClick"],Te={class:"card-inner"},ze={class:"card-front flex flex-center"},Ie={class:"text-h4 text-weight-bold text-positive q-mb-md"},Se={class:"text-h6 q-mb-sm"},Ve={class:"stats-container"},$e={class:"stat-item"},qe={class:"stat-label"},Be={class:"stat-value"},De={class:"stat-item"},We={class:"stat-label"},He={class:"stat-value"},Ne=U({__name:"CardFlipGame",setup(X){const c=we(),{t:l}=A(),$=["favorite","star","bolt","pets","flight","music_note","local_dining","sports_esports","directions_car","flight_takeoff","local_cafe","school"],G=["#e91e63","#9c27b0","#ff9800","#4caf50","#2196f3","#3f51b5","#795548","#607d8b"],M=g([]),Q=g(0),k=g(0),p=g("medium"),x=g(!1),T=g(0);let v=[],F=!1,_=null,z=null;const q=y(()=>Math.min(c.screen.width-40,800)),B=y(()=>Math.min(c.screen.height-200,600)),I=y(()=>c.screen.lt.sm?50:80),S=y(()=>c.screen.lt.sm?75:120),D=y(()=>c.screen.lt.sm?"1.5em":"2.5em"),Y=y(()=>[{label:l("components.cardFlipGame.difficulty.easy"),value:"easy"},{label:l("components.cardFlipGame.difficulty.medium"),value:"medium"},{label:l("components.cardFlipGame.difficulty.hard"),value:"hard"}]),J=()=>{let t=8;p.value==="easy"&&(t=6),p.value==="hard"&&(t=12);const a=$.slice(0,t),e=[];a.forEach((n,r)=>{const f=G[r%G.length]||"#000000";e.push({id:r*2,icon:n,color:f,isFlipped:!1,isMatched:!1}),e.push({id:r*2+1,icon:n,color:f,isFlipped:!1,isMatched:!1})});for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1)),f=e[n],h=e[r];f&&h&&(e[n]=h,e[r]=f)}return e},C=()=>{Q.value=0,k.value=0,v=[],F=!1,x.value=!1,_&&clearInterval(_),T.value=0,z=Date.now(),_=setInterval(()=>{z&&(T.value=Math.floor((Date.now()-z)/1e3))},1e3),K()},K=()=>{const t=q.value,a=B.value,e=I.value,n=S.value,r=J(),f=[],h=10;let d=4;p.value==="easy"&&(d=4),p.value==="medium"&&(d=4),p.value==="hard"&&(d=6),c.screen.lt.sm&&p.value==="hard"&&(d=4);const W=Math.ceil(r.length/d),le=d*e+(d-1)*h,ce=W*n+(W-1)*h,ne=(t-le)/2+e/2,ie=(a-ce)/2+n/2;r.forEach((re,H)=>{const de=H%d,me=Math.floor(H/d),ue=ne+de*(e+h),pe=ie+me*(n+h);f.push({...re,x:ue,y:pe})}),M.value=f},Z=t=>{F||t.isFlipped||t.isMatched||(t.isFlipped=!0,v.push(t),v.length===2&&(k.value++,F=!0,ee()))},ee=()=>{const[t,a]=v;!t||!a||(t.icon===a.icon&&t.color===a.color?(t.isMatched=!0,a.isMatched=!0,Q.value+=10,v=[],F=!1,te()):setTimeout(()=>{t&&(t.isFlipped=!1),a&&(a.isFlipped=!1),v=[],F=!1},1e3))},te=()=>{M.value.every(a=>a.isMatched)&&(_&&(clearInterval(_),_=null),setTimeout(()=>{x.value=!0},500))},ae=t=>({top:"0px",left:"0px",width:`${I.value}px`,height:`${S.value}px`,transform:`translate(${t.x-I.value/2}px, ${t.y-S.value/2}px)`}),se=t=>{const a=Math.floor(t/60),e=t%60;return`${a}:${e.toString().padStart(2,"0")}`},oe=()=>{x.value=!1,C()};return ve(()=>c.screen.name,()=>{C()}),_e(()=>{ge(()=>{C()})}),(t,a)=>(w(),j(R,{class:"flex flex-center column overflow-hidden"},{default:u(()=>[o("div",Me,[s(N,{icon:"stars",color:"primary","text-color":"white"},{default:u(()=>[O(i(m(l)("components.cardFlipGame.score"))+": "+i(Q.value),1)]),_:1}),s(N,{icon:"refresh",color:"secondary","text-color":"white"},{default:u(()=>[O(i(m(l)("components.cardFlipGame.moves"))+": "+i(k.value),1)]),_:1}),s(he,{modelValue:p.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>p.value=e),C],push:"",glossy:"","toggle-color":"primary",options:Y.value},null,8,["modelValue","options"]),s(P,{label:m(l)("components.cardFlipGame.restart"),color:"negative",icon:"restart_alt",onClick:C},null,8,["label"])]),o("div",{class:"game-container relative-position shadow-3 bg-grey-5",style:V({width:q.value+"px",height:B.value+"px"})},[(w(!0),L(xe,null,ye(M.value,e=>(w(),L("div",{key:e.id,class:ke(["card absolute",{flipped:e.isFlipped||e.isMatched,matched:e.isMatched}]),style:V(ae(e)),onClick:n=>Z(e)},[o("div",Te,[o("div",ze,[s(b,{name:"question_mark",size:D.value,color:"grey-7"},null,8,["size"])]),o("div",{class:"card-back flex flex-center",style:V({backgroundColor:e.color})},[s(b,{name:e.icon,size:D.value,color:"white"},null,8,["name","size"])],4)])],14,Qe))),128))],4),s(be,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=e=>x.value=e),persistent:""},{default:u(()=>[s(Fe,{class:"victory-card"},{default:u(()=>[s(E,{class:"text-center"},{default:u(()=>[o("div",Ie,[s(b,{name:"emoji_events",size:"xl",color:"amber"}),o("div",null,i(m(l)("components.cardFlipGame.victory.congratulations")),1)]),o("div",Se,i(m(l)("components.cardFlipGame.victory.gameWin")),1)]),_:1}),s(E,{class:"q-pt-none"},{default:u(()=>[o("div",Ve,[o("div",$e,[s(b,{name:"refresh",size:"md",color:"primary"}),o("div",qe,i(m(l)("components.cardFlipGame.victory.movesLabel")),1),o("div",Be,i(m(l)("components.cardFlipGame.victory.movesCount",{count:k.value})),1)]),o("div",De,[s(b,{name:"timer",size:"md",color:"secondary"}),o("div",We,i(m(l)("components.cardFlipGame.victory.timeLabel")),1),o("div",He,i(se(T.value)),1)])])]),_:1}),s(Ce,{align:"center"},{default:u(()=>[s(P,{label:m(l)("components.cardFlipGame.victory.restartButton"),color:"primary",icon:"restart_alt",onClick:oe,unelevated:"",class:"q-px-lg"},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),Oe=Ge(Ne,[["__scopeId","data-v-16552d6a"]]),Xe=U({__name:"CardFlipGamePage",setup(X){const{t:c,locale:l}=A();return fe(()=>({title:c("pages.cardFlipGame.title"),meta:{description:{name:"description",content:c("pages.cardFlipGame.description")},keywords:{name:"keywords",content:c("pages.cardFlipGame.keywords")},ogTitle:{property:"og:title",content:c("pages.cardFlipGame.ogTitle")},ogDescription:{property:"og:description",content:c("pages.cardFlipGame.ogDescription")}},htmlAttr:{lang:l.value}})),($,G)=>(w(),j(R,null,{default:u(()=>[s(Oe)]),_:1}))}});export{Xe as default};
