import{Q as j,u as fe}from"./use-meta-vrPTgG-j.js";import{Q as O}from"./QChip-CDFligMv.js";import{Q as he}from"./QBtnToggle-Dpe3xyfE.js";import{a as A,r as g,j as y,m as ve,E as _e,G as ge,c as R,o as k,w as u,b as o,e as s,v as E,t as i,u as m,z as L,n as N,x as ye,F as xe,H as q,y as Fe,q as P,Q as b,O as Ce,an as be,D as Ge}from"./index-CvfoOPph.js";import{u as ke}from"./use-quasar-Dj3zicDv.js";import{u as U}from"./vue-i18n.runtime-qb2B11xA.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Me={class:"row q-gutter-md q-mb-md"},Qe=["onClick"],ze={class:"card-inner"},Ie={class:"card-front flex flex-center"},Te={class:"text-h4 text-weight-bold text-positive q-mb-md"},Ve={class:"text-h6 q-mb-sm"},qe={class:"stats-container"},De={class:"stat-item"},Se={class:"stat-label"},$e={class:"stat-value"},Be={class:"stat-item"},He={class:"stat-label"},We={class:"stat-value"},Oe=A({__name:"CardFlipGame",setup(X){const n=ke(),{t:l}=U(),D=["favorite","star","bolt","pets","flight","music_note","local_dining","sports_esports","directions_car","flight_takeoff","local_cafe","school"],w=["#e91e63","#9c27b0","#ff9800","#4caf50","#2196f3","#3f51b5","#795548","#607d8b"],M=g([]),Q=g(0),G=g(0),p=g("medium"),x=g(!1),z=g(0);let v=[],F=!1,_=null,I=null;const S=y(()=>Math.min(n.screen.width-40,800)),$=y(()=>Math.min(n.screen.height-200,600)),T=y(()=>n.screen.lt.sm?50:80),V=y(()=>n.screen.lt.sm?75:120),B=y(()=>n.screen.lt.sm?"1.5em":"2.5em"),Y=y(()=>[{label:l("components.cardFlipGame.difficulty.easy"),value:"easy"},{label:l("components.cardFlipGame.difficulty.medium"),value:"medium"},{label:l("components.cardFlipGame.difficulty.hard"),value:"hard"}]),J=()=>{let t=8;p.value==="easy"&&(t=6),p.value==="hard"&&(t=12);const a=D.slice(0,t),e=[];a.forEach((c,r)=>{const f=w[r%w.length]||"#000000";e.push({id:r*2,icon:c,color:f,isFlipped:!1,isMatched:!1}),e.push({id:r*2+1,icon:c,color:f,isFlipped:!1,isMatched:!1})});for(let c=e.length-1;c>0;c--){const r=Math.floor(Math.random()*(c+1)),f=e[c],h=e[r];f&&h&&(e[c]=h,e[r]=f)}return e},C=()=>{Q.value=0,G.value=0,v=[],F=!1,x.value=!1,_&&clearInterval(_),z.value=0,I=Date.now(),_=setInterval(()=>{I&&(z.value=Math.floor((Date.now()-I)/1e3))},1e3),K()},K=()=>{const t=S.value,a=$.value,e=T.value,c=V.value,r=J(),f=[],h=10;let d=4;p.value==="easy"&&(d=4),p.value==="medium"&&(d=4),p.value==="hard"&&(d=6),n.screen.lt.sm&&p.value==="hard"&&(d=4);const H=Math.ceil(r.length/d),le=d*e+(d-1)*h,ne=H*c+(H-1)*h,ce=(t-le)/2+e/2,ie=(a-ne)/2+c/2;r.forEach((re,W)=>{const de=W%d,me=Math.floor(W/d),ue=ce+de*(e+h),pe=ie+me*(c+h);f.push({...re,x:ue,y:pe})}),M.value=f},Z=t=>{F||t.isFlipped||t.isMatched||(t.isFlipped=!0,v.push(t),v.length===2&&(G.value++,F=!0,ee()))},ee=()=>{const[t,a]=v;!t||!a||(t.icon===a.icon&&t.color===a.color?(t.isMatched=!0,a.isMatched=!0,Q.value+=10,v=[],F=!1,te()):setTimeout(()=>{t&&(t.isFlipped=!1),a&&(a.isFlipped=!1),v=[],F=!1},1e3))},te=()=>{M.value.every(a=>a.isMatched)&&(_&&(clearInterval(_),_=null),setTimeout(()=>{x.value=!0},500))},ae=t=>({top:"0px",left:"0px",width:`${T.value}px`,height:`${V.value}px`,transform:`translate(${t.x-T.value/2}px, ${t.y-V.value/2}px)`}),se=t=>{const a=Math.floor(t/60),e=t%60;return`${a}:${e.toString().padStart(2,"0")}`},oe=()=>{x.value=!1,C()};return ve(()=>n.screen.name,()=>{C()}),_e(()=>{ge(()=>{C()})}),(t,a)=>(k(),R(j,{class:"flex flex-center column overflow-hidden"},{default:u(()=>[o("div",Me,[s(O,{icon:"stars",color:"primary","text-color":"white"},{default:u(()=>[E(i(m(l)("components.cardFlipGame.score"))+": "+i(Q.value),1)]),_:1}),s(O,{icon:"refresh",color:"secondary","text-color":"white"},{default:u(()=>[E(i(m(l)("components.cardFlipGame.moves"))+": "+i(G.value),1)]),_:1}),s(he,{modelValue:p.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>p.value=e),C],push:"",glossy:"","toggle-color":"primary",options:Y.value},null,8,["modelValue","options"]),s(L,{label:m(l)("components.cardFlipGame.restart"),color:"negative",icon:"restart_alt",onClick:C},null,8,["label"])]),o("div",{class:"game-container relative-position shadow-3 bg-grey-5",style:q({width:S.value+"px",height:$.value+"px"})},[(k(!0),N(xe,null,ye(M.value,e=>(k(),N("div",{key:e.id,class:Ge(["card absolute",{flipped:e.isFlipped||e.isMatched,matched:e.isMatched}]),style:q(ae(e)),onClick:c=>Z(e)},[o("div",ze,[o("div",Ie,[s(b,{name:"question_mark",size:B.value,color:"grey-7"},null,8,["size"])]),o("div",{class:"card-back flex flex-center",style:q({backgroundColor:e.color})},[s(b,{name:e.icon,size:B.value,color:"white"},null,8,["name","size"])],4)])],14,Qe))),128))],4),s(be,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=e=>x.value=e),persistent:""},{default:u(()=>[s(Fe,{class:"victory-card"},{default:u(()=>[s(P,{class:"text-center"},{default:u(()=>[o("div",Te,[s(b,{name:"emoji_events",size:"xl",color:"amber"}),o("div",null,i(m(l)("components.cardFlipGame.victory.congratulations")),1)]),o("div",Ve,i(m(l)("components.cardFlipGame.victory.gameWin")),1)]),_:1}),s(P,{class:"q-pt-none"},{default:u(()=>[o("div",qe,[o("div",De,[s(b,{name:"refresh",size:"md",color:"primary"}),o("div",Se,i(m(l)("components.cardFlipGame.victory.movesLabel")),1),o("div",$e,i(m(l)("components.cardFlipGame.victory.movesCount",{count:G.value})),1)]),o("div",Be,[s(b,{name:"timer",size:"md",color:"secondary"}),o("div",He,i(m(l)("components.cardFlipGame.victory.timeLabel")),1),o("div",We,i(se(z.value)),1)])])]),_:1}),s(Ce,{align:"center"},{default:u(()=>[s(L,{label:m(l)("components.cardFlipGame.victory.restartButton"),color:"primary",icon:"restart_alt",onClick:oe,unelevated:"",class:"q-px-lg"},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),Ee=we(Oe,[["__scopeId","data-v-16552d6a"]]),Xe=A({__name:"CardFlipGamePage",setup(X){const{t:n,locale:l}=U();return fe(()=>({title:n("pages.cardFlipGame.title"),meta:{description:{name:"description",content:n("pages.cardFlipGame.description")},keywords:{name:"keywords",content:n("pages.cardFlipGame.keywords")},ogTitle:{property:"og:title",content:n("pages.cardFlipGame.ogTitle")},ogDescription:{property:"og:description",content:n("pages.cardFlipGame.ogDescription")}},htmlAttr:{lang:l.value}})),(D,w)=>(k(),R(j,null,{default:u(()=>[s(Ee)]),_:1}))}});export{Xe as default};
